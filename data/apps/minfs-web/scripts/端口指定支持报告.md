# 📋 MinFS 脚本端口指定支持报告

## 🎯 **总体结论**
**所有启动和停止脚本都支持端口指定！** ✅

---

## 📊 **详细支持情况**

### **1. MetaServer 相关脚本**
| 脚本名称 | 端口支持 | 默认端口 | 参数格式 |
|---------|---------|---------|---------|
| `start_metaServer.sh` | ✅ 支持 | 9090 | `<host> <port>` |
| `stop_metaServer.sh` | ✅ 支持 | 9090 | `<host> <port>` |
| `restart_metaServer.sh` | ✅ 支持 | 9090 | `<host> <port>` |
| `status_metaServer.sh` | ✅ 支持 | 9090 | `<host> <port>` |

**使用示例：**
```bash
./start_metaServer.sh localhost 9090    # 启动在9090端口
./start_metaServer.sh localhost 9091    # 启动在9091端口
./stop_metaServer.sh localhost 9090     # 停止9090端口的服务
```

### **2. DataServer 相关脚本**
| 脚本名称 | 端口支持 | 默认端口 | 参数格式 |
|---------|---------|---------|---------|
| `start_dataServer.sh` | ✅ 支持 | 8001 | `<host> <port>` |
| `stop_dataServer.sh` | ✅ 支持 | 8001 | `<host> <port>` |
| `restart_dataServer.sh` | ✅ 支持 | 8001 | `<host> <port>` |
| `status_dataServer.sh` | ✅ 支持 | 8001 | `<host> <port>` |

**使用示例：**
```bash
./start_dataServer.sh localhost 8001    # 启动在8001端口
./start_dataServer.sh localhost 8002    # 启动在8002端口
./stop_dataServer.sh localhost 8001     # 停止8001端口的服务
```

### **3. etcd 相关脚本**
| 脚本名称 | 端口支持 | 默认端口 | 参数格式 |
|---------|---------|---------|---------|
| `start_etcd.sh` | ✅ 支持 | 2379/2380 | `[host] [client_port] [peer_port]` |
| `stop_etcd.sh` | ✅ 支持 | 2379/2380 | `[client_port] [peer_port]` |
| `restart_etcd.sh` | ✅ 支持 | 2379/2380 | `[host] [client_port] [peer_port]` |
| `status_etcd.sh` | ✅ 支持 | 2379/2380 | `[client_port] [peer_port]` |

**使用示例：**
```bash
./start_etcd.sh                    # 使用默认端口
./start_etcd.sh localhost          # 指定主机
./start_etcd.sh localhost 2379 2380  # 指定客户端和集群端口
```

### **4. 其他脚本**
| 脚本名称 | 端口支持 | 默认端口 | 参数格式 |
|---------|---------|---------|---------|
| `force_stop_service.sh` | ✅ 支持 | 8001 | `<host> <port> [service_type]` |
| `setup_permissions.sh` | ❌ 不支持 | - | 无参数 |

---

## 🔧 **参数处理机制**

### **参数获取方式**
```bash
# 所有脚本都使用相同的参数处理模式
HOST=${1:-"localhost"}        # 第1个参数，默认localhost
PORT=${2:-"默认端口"}         # 第2个参数，默认端口
```

### **默认值设置**
- **MetaServer**: 默认端口 9090
- **DataServer**: 默认端口 8001  
- **etcd**: 默认客户端端口 2379，集群端口 2380

---

## 📝 **使用建议**

### **1. 启动顺序**
```bash
# 1. 启动etcd
./start_etcd.sh

# 2. 启动MetaServer
./start_metaServer.sh localhost 9090

# 3. 启动DataServer
./start_dataServer.sh localhost 8001
```

### **2. 多实例部署**
```bash
# 启动多个MetaServer实例
./start_metaServer.sh localhost 9090
./start_metaServer.sh localhost 9091
./start_metaServer.sh localhost 9092

# 启动多个DataServer实例
./start_dataServer.sh localhost 8001
./start_dataServer.sh localhost 8002
./start_dataServer.sh localhost 8003
```

### **3. 停止服务**
```bash
# 按相反顺序停止
./stop_dataServer.sh localhost 8001
./stop_metaServer.sh localhost 9090
./stop_etcd.sh
```

---

## ⚠️ **注意事项**

1. **配置文件优先级**: 如果配置文件设置了端口，可能会覆盖命令行参数
2. **端口冲突**: 确保指定的端口没有被其他服务占用
3. **服务依赖**: DataServer需要etcd和MetaServer先启动
4. **PID文件管理**: 脚本会自动根据端口生成对应的PID文件名

---

## 🎉 **总结**
所有脚本都完全支持端口指定功能，可以灵活部署多个服务实例！
