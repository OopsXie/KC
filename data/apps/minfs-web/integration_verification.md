# ğŸ”„ å‰ç«¯ä¸è„šæœ¬æ•´åˆéªŒè¯æŠ¥å‘Š

## ğŸ“Š ç«¯å£æ˜ å°„å¯¹æ¯”

### MetaServer æ˜ å°„
| å‰ç«¯æœåŠ¡ID | å‰ç«¯æ˜¾ç¤ºç«¯å£ | åç«¯è®¡ç®—ç«¯å£ | è„šæœ¬é»˜è®¤ç«¯å£ | PIDæ–‡ä»¶å | âœ…çŠ¶æ€ |
|-----------|-------------|-------------|-------------|-----------|-------|
| 1 | 9090 | 9089+1=9090 | 9090 | metaServer1.pid | âœ…ä¸€è‡´ |
| 2 | 9091 | 9089+2=9091 | 9090 | metaServer2.pid | âœ…ä¸€è‡´ |
| 3 | 9092 | 9089+3=9092 | 9090 | metaServer3.pid | âœ…ä¸€è‡´ |

### DataServer æ˜ å°„
| å‰ç«¯æœåŠ¡ID | å‰ç«¯æ˜¾ç¤ºç«¯å£ | åç«¯è®¡ç®—ç«¯å£ | è„šæœ¬é»˜è®¤ç«¯å£ | PIDæ–‡ä»¶å | âœ…çŠ¶æ€ |
|-----------|-------------|-------------|-------------|-----------|-------|
| 1 | 8001 | 8000+1=8001 | 8001 | dataServer1.pid | âœ…ä¸€è‡´ |
| 2 | 8002 | 8000+2=8002 | 8001 | dataServer2.pid | âœ…ä¸€è‡´ |
| 3 | 8003 | 8000+3=8003 | 8001 | dataServer3.pid | âœ…ä¸€è‡´ |
| 4 | 8004 | 8000+4=8004 | 8001 | dataServer4.pid | âœ…ä¸€è‡´ |

## ğŸ”§ å…³é”®æ•´åˆç‚¹

### 1. åç«¯æœåŠ¡è°ƒç”¨
```java
// MinFSService.java
ProcessBuilder processBuilder = new ProcessBuilder("bash", scriptPath, targetHost, targetPort);
```
âœ… **éªŒè¯é€šè¿‡**: ä¼ é€’æ ¼å¼ä¸º `<host> <port>`ï¼Œä¸è„šæœ¬æœŸæœ›ä¸€è‡´

### 2. è„šæœ¬å‚æ•°å¤„ç†
```bash
# æ‰€æœ‰è„šæœ¬ç»Ÿä¸€æ ¼å¼
HOST=${1:-"localhost"}
PORT=${2:-"é»˜è®¤ç«¯å£"}
```
âœ… **éªŒè¯é€šè¿‡**: å‚æ•°é¡ºåºå’Œé»˜è®¤å€¼æ­£ç¡®

### 3. PIDæ–‡ä»¶å‘½å
- **MetaServer**: `/root/minfs/workpublish/metaServer/pid/metaServer{æœåŠ¡ID}.pid`
- **DataServer**: `/root/minfs/workpublish/dataServer/pid/dataServer{æœåŠ¡ID}.pid`

âœ… **éªŒè¯é€šè¿‡**: å‘½åè§„åˆ™ä¸åç«¯è®¡ç®—ä¸€è‡´

## âš¡ æ”¯æŒçš„æ“ä½œ

### å‰ç«¯ â†’ åç«¯ â†’ è„šæœ¬ è°ƒç”¨é“¾

1. **å¯åŠ¨æœåŠ¡**
   ```
   å‰ç«¯: controlSingleServer('meta', 'start', '1')
   â†“
   åç«¯: bash start_metaServer.sh localhost 9090
   â†“
   è„šæœ¬: å¯åŠ¨MetaServeråœ¨9090ç«¯å£ï¼ŒPIDä¿å­˜åˆ°metaServer1.pid
   ```

2. **åœæ­¢æœåŠ¡**
   ```
   å‰ç«¯: controlSingleServer('data', 'stop', '2')
   â†“
   åç«¯: bash stop_dataServer.sh localhost 8002
   â†“
   è„šæœ¬: æŸ¥æ‰¾dataServer2.pidï¼Œåœæ­¢å¯¹åº”è¿›ç¨‹
   ```

3. **çŠ¶æ€æŸ¥è¯¢**
   ```
   å‰ç«¯: åˆ·æ–°é›†ç¾¤çŠ¶æ€
   â†“
   åç«¯: getClusterInfo() â†’ ClusterInfoDTO
   â†“
   å‰ç«¯: æ˜¾ç¤ºåœ¨çº¿/ç¦»çº¿çŠ¶æ€
   ```

## ğŸ¯ æ•´åˆéªŒè¯ç»“è®º

âœ… **å®Œå…¨å…¼å®¹**: å‰ç«¯ã€åç«¯ã€è„šæœ¬ä¸‰è€…ä¹‹é—´çš„ç«¯å£æ˜ å°„å’Œè°ƒç”¨é€»è¾‘å®Œå…¨ä¸€è‡´
âœ… **å‚æ•°ä¼ é€’**: è„šæœ¬å‚æ•°æ ¼å¼ä¸åç«¯è°ƒç”¨æ ¼å¼åŒ¹é…
âœ… **PIDç®¡ç†**: PIDæ–‡ä»¶å‘½åè§„åˆ™ç»Ÿä¸€ï¼Œæ”¯æŒå¤šå®ä¾‹éƒ¨ç½²
âœ… **é”™è¯¯å¤„ç†**: è„šæœ¬æœ‰å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è¾“å‡º

## ğŸš€ å¯ä»¥ç›´æ¥ä½¿ç”¨çš„åŠŸèƒ½

- [x] å¯åŠ¨/åœæ­¢/é‡å¯ MetaServer (ç«¯å£ 9090, 9091, 9092)
- [x] å¯åŠ¨/åœæ­¢/é‡å¯ DataServer (ç«¯å£ 8001, 8002, 8003, 8004)  
- [x] çŠ¶æ€æŸ¥è¯¢å’Œå®æ—¶ç›‘æ§
- [x] æ‰¹é‡æ“ä½œï¼ˆé€šè¿‡å‰ç«¯ç•Œé¢ï¼‰
- [x] å¤šå®ä¾‹ç®¡ç†

æ•´åˆå·¥ä½œå·²å®Œæˆï¼Œå¯ä»¥ç«‹å³æŠ•å…¥ä½¿ç”¨ï¼ğŸ‰