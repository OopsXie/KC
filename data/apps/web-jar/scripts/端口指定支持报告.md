# ğŸ“‹ MinFS è„šæœ¬ç«¯å£æŒ‡å®šæ”¯æŒæŠ¥å‘Š

## ğŸ¯ **æ€»ä½“ç»“è®º**
**æ‰€æœ‰å¯åŠ¨å’Œåœæ­¢è„šæœ¬éƒ½æ”¯æŒç«¯å£æŒ‡å®šï¼** âœ…

---

## ğŸ“Š **è¯¦ç»†æ”¯æŒæƒ…å†µ**

### **1. MetaServer ç›¸å…³è„šæœ¬**
| è„šæœ¬åç§° | ç«¯å£æ”¯æŒ | é»˜è®¤ç«¯å£ | å‚æ•°æ ¼å¼ |
|---------|---------|---------|---------|
| `start_metaServer.sh` | âœ… æ”¯æŒ | 9090 | `<host> <port>` |
| `stop_metaServer.sh` | âœ… æ”¯æŒ | 9090 | `<host> <port>` |
| `restart_metaServer.sh` | âœ… æ”¯æŒ | 9090 | `<host> <port>` |
| `status_metaServer.sh` | âœ… æ”¯æŒ | 9090 | `<host> <port>` |

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
./start_metaServer.sh localhost 9090    # å¯åŠ¨åœ¨9090ç«¯å£
./start_metaServer.sh localhost 9091    # å¯åŠ¨åœ¨9091ç«¯å£
./stop_metaServer.sh localhost 9090     # åœæ­¢9090ç«¯å£çš„æœåŠ¡
```

### **2. DataServer ç›¸å…³è„šæœ¬**
| è„šæœ¬åç§° | ç«¯å£æ”¯æŒ | é»˜è®¤ç«¯å£ | å‚æ•°æ ¼å¼ |
|---------|---------|---------|---------|
| `start_dataServer.sh` | âœ… æ”¯æŒ | 8001 | `<host> <port>` |
| `stop_dataServer.sh` | âœ… æ”¯æŒ | 8001 | `<host> <port>` |
| `restart_dataServer.sh` | âœ… æ”¯æŒ | 8001 | `<host> <port>` |
| `status_dataServer.sh` | âœ… æ”¯æŒ | 8001 | `<host> <port>` |

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
./start_dataServer.sh localhost 8001    # å¯åŠ¨åœ¨8001ç«¯å£
./start_dataServer.sh localhost 8002    # å¯åŠ¨åœ¨8002ç«¯å£
./stop_dataServer.sh localhost 8001     # åœæ­¢8001ç«¯å£çš„æœåŠ¡
```

### **3. etcd ç›¸å…³è„šæœ¬**
| è„šæœ¬åç§° | ç«¯å£æ”¯æŒ | é»˜è®¤ç«¯å£ | å‚æ•°æ ¼å¼ |
|---------|---------|---------|---------|
| `start_etcd.sh` | âœ… æ”¯æŒ | 2379/2380 | `[host] [client_port] [peer_port]` |
| `stop_etcd.sh` | âœ… æ”¯æŒ | 2379/2380 | `[client_port] [peer_port]` |
| `restart_etcd.sh` | âœ… æ”¯æŒ | 2379/2380 | `[host] [client_port] [peer_port]` |
| `status_etcd.sh` | âœ… æ”¯æŒ | 2379/2380 | `[client_port] [peer_port]` |

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```bash
./start_etcd.sh                    # ä½¿ç”¨é»˜è®¤ç«¯å£
./start_etcd.sh localhost          # æŒ‡å®šä¸»æœº
./start_etcd.sh localhost 2379 2380  # æŒ‡å®šå®¢æˆ·ç«¯å’Œé›†ç¾¤ç«¯å£
```

### **4. å…¶ä»–è„šæœ¬**
| è„šæœ¬åç§° | ç«¯å£æ”¯æŒ | é»˜è®¤ç«¯å£ | å‚æ•°æ ¼å¼ |
|---------|---------|---------|---------|
| `force_stop_service.sh` | âœ… æ”¯æŒ | 8001 | `<host> <port> [service_type]` |
| `setup_permissions.sh` | âŒ ä¸æ”¯æŒ | - | æ— å‚æ•° |

---

## ğŸ”§ **å‚æ•°å¤„ç†æœºåˆ¶**

### **å‚æ•°è·å–æ–¹å¼**
```bash
# æ‰€æœ‰è„šæœ¬éƒ½ä½¿ç”¨ç›¸åŒçš„å‚æ•°å¤„ç†æ¨¡å¼
HOST=${1:-"localhost"}        # ç¬¬1ä¸ªå‚æ•°ï¼Œé»˜è®¤localhost
PORT=${2:-"é»˜è®¤ç«¯å£"}         # ç¬¬2ä¸ªå‚æ•°ï¼Œé»˜è®¤ç«¯å£
```

### **é»˜è®¤å€¼è®¾ç½®**
- **MetaServer**: é»˜è®¤ç«¯å£ 9090
- **DataServer**: é»˜è®¤ç«¯å£ 8001  
- **etcd**: é»˜è®¤å®¢æˆ·ç«¯ç«¯å£ 2379ï¼Œé›†ç¾¤ç«¯å£ 2380

---

## ğŸ“ **ä½¿ç”¨å»ºè®®**

### **1. å¯åŠ¨é¡ºåº**
```bash
# 1. å¯åŠ¨etcd
./start_etcd.sh

# 2. å¯åŠ¨MetaServer
./start_metaServer.sh localhost 9090

# 3. å¯åŠ¨DataServer
./start_dataServer.sh localhost 8001
```

### **2. å¤šå®ä¾‹éƒ¨ç½²**
```bash
# å¯åŠ¨å¤šä¸ªMetaServerå®ä¾‹
./start_metaServer.sh localhost 9090
./start_metaServer.sh localhost 9091
./start_metaServer.sh localhost 9092

# å¯åŠ¨å¤šä¸ªDataServerå®ä¾‹
./start_dataServer.sh localhost 8001
./start_dataServer.sh localhost 8002
./start_dataServer.sh localhost 8003
```

### **3. åœæ­¢æœåŠ¡**
```bash
# æŒ‰ç›¸åé¡ºåºåœæ­¢
./stop_dataServer.sh localhost 8001
./stop_metaServer.sh localhost 9090
./stop_etcd.sh
```

---

## âš ï¸ **æ³¨æ„äº‹é¡¹**

1. **é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§**: å¦‚æœé…ç½®æ–‡ä»¶è®¾ç½®äº†ç«¯å£ï¼Œå¯èƒ½ä¼šè¦†ç›–å‘½ä»¤è¡Œå‚æ•°
2. **ç«¯å£å†²çª**: ç¡®ä¿æŒ‡å®šçš„ç«¯å£æ²¡æœ‰è¢«å…¶ä»–æœåŠ¡å ç”¨
3. **æœåŠ¡ä¾èµ–**: DataServeréœ€è¦etcdå’ŒMetaServerå…ˆå¯åŠ¨
4. **PIDæ–‡ä»¶ç®¡ç†**: è„šæœ¬ä¼šè‡ªåŠ¨æ ¹æ®ç«¯å£ç”Ÿæˆå¯¹åº”çš„PIDæ–‡ä»¶å

---

## ğŸ‰ **æ€»ç»“**
æ‰€æœ‰è„šæœ¬éƒ½å®Œå…¨æ”¯æŒç«¯å£æŒ‡å®šåŠŸèƒ½ï¼Œå¯ä»¥çµæ´»éƒ¨ç½²å¤šä¸ªæœåŠ¡å®ä¾‹ï¼
