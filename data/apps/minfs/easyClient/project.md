课后作业:
动手实现一个拥有最基础的文件操作的分布式文件存储系统
minFS 架构图

![img.png](img.png)
作业要求
A，系统基础功能完成
答辩功能和结果展示要求

1
文件、目录创建(create、createDirectory)
通过sdk调用，打印输出结果，且在元数据存储侧可以查询到结果

2
查看属性信息(listStatus，getStatus)
通过sdk调用，打印输出结果

3
文件、目录删除(delete)
通过sdk调用，打印输出结果，且在元数据存储侧可以查询到结果，目录删除对非空目录支持递归删除

4
支持文件open、write、read
通过sdk调用，可以模拟成功写大小分别为100M、10M、512k的文件，随后完整读出来，并且保证写入的文件md5与读到内容md5一致

5
获取集群信息
通过sdk调用，打印输出结果

6
系统元数据、内容数据实现三副本
可以通过接口或者服务端查询三副本的分布情况

B，系统高可用、数据一致性功能实现


7
3副本均匀分布
通过接口或者日志、命令输出，可统计查看当前集群节点上的主副本分布情况

8
metaServer元数据服务高可用
模拟主从切换，整体服务依然可用，不影响文件的读写

9
数据安全性保证
模拟手动删除一些文件的副本，随后系统主动发现文件副本不足隐患，同时自我修复，根据考察点7的工具进行查看验证

10
元数据存储方式采用自行实现（sqllite，rocksdb嵌入式数据库）
元数据组织需要自行实现，例如使用本地文件系统+主从同步方式或者嵌入式数据库+主从同步等等

注： 9、10 两项为加分项，每项10分，不完成不加分
考核要求
1. 集群规模最小为三个metaServer，一主二从（默认），四个dataServer，保证三副本写。最终所有程序会部署在一个机器上，通过不同端口号来模拟多节点的部署方式，可选端口范围8000~9999
2. SDK可暴露出来集群的metaServer地址及dataServer地址
3. 系统内相关心跳超时时间一律默认小于30s，如果实现了fsck+recovery，则扫描、恢复周期需要小于等于120s
4. 编写服务启动脚本start.sh，实现一键启动整个系统，并初始化如zk的节点路径等系统必要信息，保证系统是一个可用状态
5. 项目工程需要按照以下规范编译，执行build.sh 编译完成后，生成项目同级目录下的文件夹名称为workpublish，下面的文件子目录包括
   i. bin，包含一键启动所有服务的启动脚本，名称为start.sh
   ii. metaServer，元数据服务，内部可包含所有服务的lib及主服务jar、日志目录等
   iii. dataServer，内容数据服务，内部可包含所有服务的lib及主服务jar、日志目录等
   iv. easyClient，内部包含client的SDK的jar文件easyClient-1.0.jar
6. Git仓库约定： 仓库名：minfs 假设你的git路径为：http://120.92.88.48/jiangran 那么需要满足： 通过 git clone http://120.92.88.48/jiangran/minfs.git 能够拉到你的代码 分支：main
7. 自动化测试程序会引用workpublish下的easyClient-1.0.jar，并按照接口定义进行功能测试，如用到了zookeeper、redis等组件，要保证有默认值无须外部传入，能顺利跑通case，要求作业部署时严格按照此路径部署服务/data/apps/minfs，easyClient-1.0.jar所在服务器上的路径固定为 /data/apps/minfs/workpublish/easyClient/easyClient-1.0.jar
8. 答辩形式，在开发环境(云主机)自行基于SDK easyClient接口方法编写测试用例，通过终端输出结果或者日志打印结果，来模拟所有实现的功能，输出尽量表达简洁精炼反馈出预期结果最优
   a. 文件基础操作功能演示。
   b. 21号答辩，20号填写答辩表
   c. 展示系统高可用实现，宕掉一些节点服务后，系统整体运行表现（可通过kill 进程后继续跑一轮基础功能演示效果）
   d. 存储数据异常发现与修复展示（手动删除一些副本文件，可通过日志打印或者工具查询到结果即可）
